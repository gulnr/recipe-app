{% extends "recipeblog/base.html" %}
{% load staticfiles %}
{% block content %}
    <div class="col-md-4 justify-end ">
        <div class="post-search-card ">
            <h2> Search </h2>
            <form method="GET" action="{% url 'search' %}">
                <input style="margin-right:10px;" type="text" name='query' placeholder="ingredient, dish, keyword..." value="{{ request.GET.query }}">
                <input type="submit" class="btn btn-outline-primary loader" value="Submit">
            </form>
            <div style="margin-top:10px;" class="alert alert-info" role="alert">
                If you want to search more than one item, please add space between items
            </div>
        </div>

        <div class="post-search-card ">
            <h2> Top Used Ingredients </h2>
            <ul>
                {% for item in most_used_ingredients %}
                    <li><a class="btn btn-link loader" href="{% url 'search_ingredient' item_val=item.ingredients__ingredient_name %}"> {{item.ingredients__ingredient_name}}({{item.total}})</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="col-md-8">
        {% for post in post_list %}
            <div class="post-card">
                <h1><a href="{% url 'post_detail' pk=post.pk %}">{{ post }}</a></h1>
                <img class="food-img" alt="{{ post }}" src="{{ post.image.url }}"/>
                <p>{{ post.description|safe |truncatechars:200}}</p>

                <div class="post-card-footer">
                    <strong>{{ post.published_date|date:"d/m/Y"}} . {{post.like.count}} likes . {{post.rate_avg}}/5 ({{post.rate.count}} Votes). {{post.approve_comment.count}} comments . by {{post.author}}
                        {% if user == post.author %} </strong>
                        <a class="btn btn-link loader" href="{% url 'post_edit' pk=post.pk %}">Edit</a>
                        <a class="btn btn-link loader" href="{% url 'post_remove' pk=post.pk %}">Remove</a>
                    {% endif %}
                </div>
            </div>

        {% endfor %}
    </div>

    <nav aria-label="Page navigation example">
      <ul class="pagination">
        <li class="page-item"><a class="page-link" href="#">Previous</a></li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">Next</a></li>
      </ul>
    </nav>

{% endblock %}